<!DOCTYPE HTML><html><head><meta charset="UTF-8"><title>Untitled Document</title><link href="searchTest.css" rel="stylesheet" type="text/css"><!--- set up cfajax proxy, using JSON cfc ---><cfajaxproxy cfc="cageJSON" jsclassname="cageJSON"><!--- set up jQuery ---><script type="text/javascript" src= "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><!--- init normal CFC for non ajax calls  ---><cfscript>cage = CreateObject("Component","cage");cage.init();manuscriptLocations = cage.getManuscriptLocations();ensembleTypes = cage.getEnsembleTypes();instrumentTypes = cage.getInstrumentTypes();specificInstruments = cage.getSpecificInstruments();collaborators = cage.getCollaborators();</cfscript><script type="text/javascript">var length = 0;var premiereYear = 0;var manuscriptLocation = 0;var ensembleType = 0;var instrumentType = 0;var specificInstrument = 0;var searchString = '';var collaborators = 0;var recordings = 0;var published = 0;var numberString = 0;var numberLimit = 0;var cunningham = 0;var updateFilters = function(){length = $('#selectLength').val();premiereYear = $('#selectPremiere').val();manuscriptLocation = $('#selectManuscript').val();ensembleType = $('#selectEnsembleType').val();instrumentType = $('#selectInstrumentType').val();specificInstrument = $('#selectSpecificInstrument').val();searchString = $('#stringSearch').val();collaborators = $('#selectCollaborator').val();recordings = $('#selectRecording').val();published = $('#selectPublished').val();numberString = $('#numberOfPlayers').val();if (numberString == ''){	numberString = 0;	}numberLimit = getRadioValue();cunningham = $('#selectCunningham').val();getFilteredWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);}var getRadioValue = function(){if (document.getElementById('radioNumber_0').checked){return 1;	} else if (document.getElementById('radioNumber_1').checked){return 2;			} else if (document.getElementById('radioNumber_2').checked){return 3;			}}var resetSearch = function(){//document.getElementById('selectCollaborator').value = 0;controls = $('select');for (i=0;i<controls.length;i++){controls[i].value = 0;		}textControls = $('input:text');	for(i=0;i<textControls.length;i++){		textControls[i].value = '';	}document.getElementById('numberOfPlayers').value = '';	updateFilters();}var setSort = function(){	}var getFilteredWorks = function(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham){							// $("#loading").show();												document.getElementById("worksTable").innerHTML = '';						$("#loading").show();						var cageProxy = new cageJSON();						cageProxy.setCallbackHandler(getFilteredWorksReturn);						cageProxy.setErrorHandler(myErrorHandler); 						cageProxy.getWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);						}var getFilteredWorksReturn = function(filteredWorks){						//document.getElementById("worksTable").innerHTML = '';						$("#loading").hide();						if(filteredWorks.DATA.length > 0){												for(i=0;i<filteredWorks.DATA.length;i++){ 						var row = document.createElement("tr");						var cell1 = document.createElement("td");						var cell2 = document.createElement("td");						/*						if (i == 0){						cell1.innerHTML = '<i>' + dances.DATA[i][2] +'</i>';						} else if (dances.DATA[i][2] == dances.DATA[i-1][2]){						cell1.innerHTML = '<i> </i>';						} else {						cell1.innerHTML = '<i>' + dances.DATA[i][2] +'</i>';							}						*/						cell1.innerHTML = '<a href = "workReturn.cfm?work_ID=' + filteredWorks.DATA[i][0] + '">' + '<i>' + filteredWorks.DATA[i][1] +'</i></A>';						cell2.innerHTML = '<i>' + filteredWorks.DATA[i][3] +'</i>';						row.appendChild(cell1);						row.appendChild(cell2);												document.getElementById("worksTable").appendChild(row);							}							}else{						//there are no results												var row = document.createElement("tr");						var cell1 = document.createElement("td");						var cell2 = document.createElement("td");						cell1.innerHTML = '<i>No works met the criteria...</i>';						row.appendChild(cell1);						document.getElementById("worksTable").appendChild(row);						}											}				 // Error handler for the asynchronous functions.             var myErrorHandler = function(statusCode, statusMsg)             {                 alert('Status: ' + statusCode + ', ' + statusMsg);             } </script></head><body><div class="container">  <div class="sidebar1">    <select name="length" onchange="updateFilters()" id="selectLength" style="width:170px; display:block;">      <option value="0" label="Duration" selected="selected">      <option value="1" label="< 10'">      <option value="2" label="10' - 19'">      <option value="3" label="20 - 29'">      <option value="4" label="> 30'">    </select>    <select name="premiereYear" onchange="updateFilters()" id="selectPremiere" style="width:170px; display:block;">      <option value="0" label="Premiere Date" selected="selected">      <option value="1" label="Before 1940" >      <option value="2" label="1940 - 1949">      <option value="3" label="1950 - 1959">      <option value="4" label="1960 - 1969">      <option value="5" label="1970 - 1979">      <option value="6" label="1980 - 1989">      <option value="7" label="After 1990">    </select>    <select name="manuscriptLocation" onchange="updateFilters()" id="selectManuscript"  style="width:170px; display:block;">      <option value="0" label="Manuscript Location" selected="selected">       <cfoutput query="manuscriptLocations">        <option value="#data#" label="#label#">       </cfoutput>    </select>    <select name="ensembleType" onchange="updateFilters()" id="selectEnsembleType" style="width:170px; display:block;">    	<option value="0" label="Ensemble Type" selected="selected">        <cfoutput query="ensembleTypes">        <option value="#data#" label="#label#">        </cfoutput>    </select>    <select name="instrumentType" onchange="updateFilters()" id="selectInstrumentType" style="width:170px; display:block;">    	<option value="0" label="Instrument Type" selected="selected">        <cfoutput query="instrumentTypes">        <option value="#data#" label="#label#">        </cfoutput>     </select>      <select name="specificInstrument" onchange="updateFilters()" id="selectSpecificInstrument" style="width:170px; display:block;">    	<option value="0" label="Specific Instrument" selected="selected">        <cfoutput query="specificInstruments">        <option value="#data#" label="#label#">        </cfoutput>     </select>         <select name="cunningham" onchange="updateFilters()" id="selectCunningham" style="width:170px; display:block;">    	<option value="0" label="Cunningham Related" selected="selected">        <option value="1" label="Used by Cunningham">     </select>      ------------------     <input type="text" id="stringSearch" placeholder="Search for a Title"  />      <button id="doSearch" title="GO" onClick="updateFilters()" value="GO" name="GO">Go</button>    	<select name="collaborators" onchange="updateFilters()" id="selectCollaborator" style="width:170px; display:block;">    	<option value="0" label="Collaborator" selected="selected">        <cfoutput query="collaborators">        <option value="#data#" label="#label#">        </cfoutput>     </select>     <select name="recordingExists" onchange="updateFilters()" id="selectRecording" style="width: 170px; display: block; ">    	<option value="0" label="Recordings" selected="selected">         <option value="1" label="Recordings known">        <option value="2" label="Recordings not known">        <option value="3" label="Reset - Show all works">     </select>    <select name="published" onchange="updateFilters()" id="selectPublished" style="width:170px; display:block; color:#333">    	<option value="0" label="Published?" selected="selected">         <option value="1" label="Published">        <option value="2" label="Not Published">        <option value="3" label="Reset - Show all works">     </select>    ------------------<br />  <small>Number of Players</small><br />     <input  type="number" id="numberOfPlayers" placeholder="number" width="3"/><button id="doSearch" title="GO" onClick="updateFilters()" value="GO" name="GO">Go</button> <br />    <p>       <label>         <input type="radio" name="radioNumber" value="1" id="radioNumber_0" checked>         <small>Exactly this Niumber</small></label>       <br>       <label>         <input type="radio" name="radioNumber" value="2" id="radioNumber_1">         <small>Up to This Number</small></label>       <br>       <label>         <input type="radio" name="radioNumber" value="3" id="radioNumber_2">         <small>At Least this Number</small></label>       <br>    </p>        <button id="reset" title="Reset" onClick="resetSearch()" value="reset" name="reset">Reset</button>    <!-- end .sidebar1 --></div>     <div class="content">    <div id="loading">      <p> Please Wait</p>    </div>  <table id="worksTable">  </table>    <!-- end .content --></div><!-- end .container --></div><script type="text/javascript">	$(document).ready(function(e) {		 $("#loading").hide();	       getFilteredWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);    });	</script></body></html>