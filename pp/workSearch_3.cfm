<!doctype html><html><head><meta charset="UTF-8"><title>Untitled Document</title><link href="workSearch_3.css" rel="stylesheet" type="text/css"><!--- set up cfajax proxy, using JSON cfc ---><cfajaxproxy cfc="cageJSON" jsclassname="cageJSON"><!--- set up jQuery ---><script type="text/javascript" src= "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><!--- init normal CFC for non ajax calls  ---><cfscript>cage = CreateObject("Component","cage");cage.init();manuscriptLocations = cage.getManuscriptLocations();ensembleTypes = cage.getEnsembleTypes();instrumentTypes = cage.getInstrumentTypes();specificInstruments = cage.getSpecificInstruments();collaborators = cage.getCollaborators();</cfscript><script type="text/javascript">var length = 0;var premiereYear = 0;var manuscriptLocation = 0;var ensembleType = 0;var instrumentType = 0;var specificInstrument = 0;var searchString = '';var collaborators = 0;var recordings = 0;var published = 0;var numberString = 0;var numberLimit = 0;var cunningham = 0;var updateFilters = function(){length = $('#selectLength').val();premiereYear = $('#selectPremiere').val();manuscriptLocation = $('#selectManuscript').val();ensembleType = $('#selectEnsembleType').val();instrumentType = $('#selectInstrumentType').val();specificInstrument = $('#selectSpecificInstrument').val();searchString = $('#stringSearch').val();collaborators = $('#selectCollaborator').val();recordings = $('#selectRecording').val();published = $('#selectPublished').val();numberString = $('#numberOfPlayers').val();if (numberString == ''){	numberString = 0;	}numberLimit = getRadioValue();cunningham = $('#selectCunningham').val();getFilteredWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);}var getRadioValue = function(){if (document.getElementById('radioNumber_0').checked){return 1;	} else if (document.getElementById('radioNumber_1').checked){return 2;			} else if (document.getElementById('radioNumber_2').checked){return 3;			}}var resetSearch = function(){//document.getElementById('selectCollaborator').value = 0;controls = $('select');for (i=0;i<controls.length;i++){controls[i].value = 0;		}textControls = $('input:text');	for(i=0;i<textControls.length;i++){		textControls[i].value = '';	}document.getElementById('numberOfPlayers').value = '';	updateFilters();}var setSort = function(){	}var getFilteredWorks = function(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham){						document.getElementById("worksTable").innerHTML = '';						document.getElementById("scalarDetails").innerHTML = '';						document.getElementById("recordingsTable").innerHTML = '';						$("#loading").show();						var cageProxy = new cageJSON();						cageProxy.setCallbackHandler(getFilteredWorksReturn);						cageProxy.setErrorHandler(myErrorHandler); 						cageProxy.getWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);}var getWorkDetails = function(work_ID){						document.getElementById("scalarDetails").innerHTML = '';						document.getElementById("recordingsTable").innerHTML = '';												//$("#loading").show();												var cageProxy = new cageJSON();						cageProxy.setCallbackHandler(getWorkDetailReturn);						cageProxy.setErrorHandler(myErrorHandler);						cageProxy.getWorkDetails_3(work_ID);												var cageProxyRecording = new cageJSON();						cageProxyRecording.setCallbackHandler(getRecordingReturn);						cageProxyRecording.setErrorHandler(myErrorHandler);						cageProxyRecording.getRecordSummary(work_ID);}var getWorkDetailReturn = function(workDetail){												detailHTML = '<br /><strong>Work Summary</strong><a href = "workReturn.cfm?work_ID=' + workDetail.DATA[0][0] + '">  See Work Details</a><br /><br />';						detailHTML += '<strong>Work Title:</strong><i> ' + workDetail.DATA[0][1] +  '</i><br />';						if (workDetail.DATA[0][2]){						detailHTML += '<strong>Alt. Work Title:</strong><i> ' + workDetail.DATA[0][2] +  '</i><br />';						}						if(workDetail.DATA[0][3]){						detailHTML += '<strong>2nd Alt. Work Title:</strong><i> ' + workDetail.DATA[0][3] +  '</i><br />';						}						detailHTML += '<br /><strong>Date: </strong>' + workDetail.DATA[0][4] ;						detailHTML += '<br /><br /><strong>Instrumentation: </strong>' + workDetail.DATA[0][7] ;						if(workDetail.DATA[0][8] ){						detailHTML += '<br /><br /><strong>Length: </strong>' + workDetail.DATA[0][8] ;						}						detailHTML += '<br /><br /><strong>Comments: </strong>' + workDetail.DATA[0][10] ;						if (workDetail.DATA[0][12] ){						detailHTML += '<br /><br /><strong>Dedicatee(s): </strong>' + workDetail.DATA[0][12] ;						}						if (workDetail.DATA[0][5] ){						detailHTML += '<br /><br /><strong>C.F. Peters Catalogue Number: </strong>' + workDetail.DATA[0][5] ;						}						detailHTML += '<br /><br />';						detailHTML += '<strong>Recordings Summary</strong><br />';												document.getElementById("scalarDetails").innerHTML = detailHTML;																		}var getFilteredWorksReturn = function(filteredWorks){						//document.getElementById("worksTable").innerHTML = '';						$("#loading").hide();						if(filteredWorks.DATA.length > 0){												for(i=0;i<filteredWorks.DATA.length;i++){ 						var row = document.createElement("tr");						row.id = filteredWorks.DATA[i][0];						row.className = 'worksClass';						var cell1 = document.createElement("td");						var cell2 = document.createElement("td");						cell1.innerHTML = '<a href = "javascript:getWorkDetails(' + filteredWorks.DATA[i][0] + ')">' + '<i>' + filteredWorks.DATA[i][1] +'</i></A>';						cell2.innerHTML = '<i>' + filteredWorks.DATA[i][3] +'</i>';						row.appendChild(cell1);						//row.appendChild(cell2);												document.getElementById("worksTable").appendChild(row);							}						$('td').click(function(event){								$('.highlight').removeClass('highlight');								$(this).toggleClass("highlight");								});								}else{						//there are no results												var row = document.createElement("tr");												var cell1 = document.createElement("td");						var cell2 = document.createElement("td");						cell1.innerHTML = '<i>No works met the criteria...</i>';						row.appendChild(cell1);						document.getElementById("worksTable").appendChild(row);						}											}var getRecordingReturn = function(recordings){						if (recordings.DATA.length > 0){							for(i=0;i<recordings.DATA.length;i++){ 								var row = document.createElement("tr");								var cell1 = document.createElement("td");								var cell2 = document.createElement("td");								cell1.innerHTML = '<i><small>' + recordings.DATA[i][1] + '</small></i>';								cell2.innerHTML = '<img src="../db_images/Discog/DiscImages/' + recordings.DATA[i][3]  + '" width="75" height="75"/>';								row.appendChild(cell1);								row.appendChild(cell2);								document.getElementById("recordingsTable").appendChild(row);							}						}else{						// no recordings...						var row = document.createElement("tr");						var cell1 = document.createElement("td");						cell1.innerHTML = '<br /><i>There are no recordings in the Database</i>';						row.appendChild(cell1);						document.getElementById("recordingsTable").appendChild(row);						}}// Error handler for the asynchronous functions.             var myErrorHandler = function(statusCode, statusMsg)             {                 alert('Status: ' + statusCode + ', ' + statusMsg);             } </script></head><body><div class="container">  <div class="sidebar1">    <select name="length" onchange="updateFilters()" id="selectLength" style="width:170px; display:block;">      <option value="0" label="Duration" selected="selected">Duration</option>      <option value="1" label="< 10'">< 10'</option>      <option value="2" label="10' - 19'">10' - 19'</option>      <option value="3" label="20 - 29'">20 - 29'</option>      <option value="4" label="> 30'" >> 30'</option>    </select>   <select name="premiereYear" onchange="updateFilters()" id="selectPremiere" style="width:170px; display:block;">      <option value="0" label="Premiere Date" selected="selected">Premiere Date</option>      <option value="1" label="Before 1940" >Before 1940</option>      <option value="2" label="1940 - 1949">1940 - 1949</option>      <option value="3" label="1950 - 1959">1950 - 1959</option>      <option value="4" label="1960 - 1969">1960 - 1969</option>      <option value="5" label="1970 - 1979">1970 - 1979</option>      <option value="6" label="1980 - 1989">1980 - 1989</option>      <option value="7" label="After 1990">After 1990</option>    </select>    <select name="manuscriptLocation" onchange="updateFilters()" id="selectManuscript"  style="width:170px; display:block;">      <option value="0" label="Manuscript Location" selected="selected"> Manuscript Location</option>      <cfoutput query="manuscriptLocations">        <option value="#data#" label="#label#">#label#</option>       </cfoutput>    </select>    <select name="ensembleType" onchange="updateFilters()" id="selectEnsembleType" style="width:170px; display:block;">    	<option value="0" label="Ensemble Type" selected="selected">Ensemble Type</option>        <cfoutput query="ensembleTypes">        <option value="#data#" label="#label#">#label#</option>        </cfoutput>    </select>    <select name="instrumentType" onchange="updateFilters()" id="selectInstrumentType" style="width:170px; display:block;">    	<option value="0" label="Instrument Type" selected="selected">Instrument Type</option>        <cfoutput query="instrumentTypes">        <option value="#data#" label="#label#">#label#</option>        </cfoutput>     </select>      <select name="specificInstrument" onchange="updateFilters()" id="selectSpecificInstrument" style="width:170px; display:block;">    	<option value="0" label="Specific Instrument" selected="selected">Specific Instrument</option>        <cfoutput query="specificInstruments">        <option value="#data#" label="#label#">#label#</option>        </cfoutput>     </select>         <select name="cunningham" onchange="updateFilters()" id="selectCunningham" style="width:170px; display:block;">    	<option value="0" label="Cunningham Related" selected="selected">Cunningham Related</option>        <option value="1" label="Used by Cunningham">Used by Cunningham</option>     </select>      ------------------     <input type="text" id="stringSearch" placeholder="Search for a Title"  />      <button id="doSearch" title="GO" onClick="updateFilters()" value="GO" name="GO">Go</button>    	<select name="collaborators" onchange="updateFilters()" id="selectCollaborator" style="width:170px; display:block;">    	<option value="0" label="Collaborator" selected="selected">Collaborator</option>        <cfoutput query="collaborators">        <option value="#data#" label="#label#">#label#</option>        </cfoutput>     </select>     <select name="recordingExists" onchange="updateFilters()" id="selectRecording" style="width: 170px; display: block; ">    	<option value="0" label="Recordings" selected="selected">Recordings</option>         <option value="1" label="Recordings known">Recordings known</option>        <option value="2" label="Recordings not known">Recordings not known</option>        <option value="3" label="Reset - Show all works">Reset - Show all works</option>     </select>    <select name="published" onchange="updateFilters()" id="selectPublished" style="width:170px; display:block; color:#333">    	<option value="0" label="Published?" selected="selected">Published?</option>         <option value="1" label="Published">Published</option>        <option value="2" label="Not Published">Not Published</option>        <option value="3" label="Reset - Show all works">Reset - Show all works</option>     </select>    ------------------<br />  <small>Number of Players</small><br />     <input  type="number" id="numberOfPlayers" placeholder="number" width="3"/><button id="doSearch" title="GO" onClick="updateFilters()" value="GO" name="GO">Go</button> <br />    <p>       <label>         <input type="radio" name="radioNumber" value="1" id="radioNumber_0" checked>         <small>Exactly this Niumber</small></label>       <br>       <label>         <input type="radio" name="radioNumber" value="2" id="radioNumber_1">         <small>Up to This Number</small></label>       <br>       <label>         <input type="radio" name="radioNumber" value="3" id="radioNumber_2">         <small>At Least this Number</small></label>       <br>    </p>        <button id="reset" title="Reset" onClick="resetSearch()" value="reset" name="reset">Reset</button>    <!-- end .sidebar1 -->	</div>  <div class="content" style="height:800px;overflow:scroll">    <div id="loading">      <p> Please Wait</p>    </div>      <table id="worksTable">  </table>    <!-- end .content --></div>  <div class="sidebar2">  	<div class="workDetails" id="workDetails" style="height:800px;overflow:scroll">    	<div id="scalarDetails">        </div>    	<div id="recordings" >   		<table id="recordingsTable">        </table>    	</div>        </div>        <!-- end .sidebar2 --></div>  <!-- end .container --></div>  </body><script type="text/javascript">	$(document).ready(function(e) {		 $("#loading").hide();		 $('#detailTable').hide();	       getFilteredWorks(length,premiereYear,manuscriptLocation,ensembleType,instrumentType,specificInstrument,searchString,collaborators,recordings,published,numberString,numberLimit,cunningham);	   $('td').click(function(event){		alert($(this).attr('id')); 	   	$(this).toggleClass("highlight");	    });    });	</script></html>